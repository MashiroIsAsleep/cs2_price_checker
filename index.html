<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>CS2 Price Checker</title>
<style>
  :root { color-scheme: dark; }
  body{margin:0;display:flex;justify-content:center;align-items:center;min-height:100vh;background:#111;font-family:sans-serif;color:#eee}
  .card{background:#222;padding:2rem;border-radius:8px;width:320px;box-shadow:0 0 10px rgba(0,0,0,.5)}
  input,button{width:100%;padding:.6rem;margin:.4rem 0;border:none;border-radius:4px;font-size:1rem}
  input{background:#333;color:#eee}
  button{background:#27ae60;color:#fff;font-weight:600;cursor:pointer}
  button:disabled{background:#555}
  pre{white-space:pre-wrap;text-align:center}
</style>
</head>
<body>
  <div class="card">
    <h1 style="text-align:center;margin-bottom:1rem">CS2 Price Checker</h1>
    <input id="item" placeholder="Item (AK‑47 | Redline)" required>
    <input id="float" type="number" step="0.0001" min="0" max="1" placeholder="Float (optional)">
    <input id="seed" type="number" placeholder="Paint seed (optional)">
    <button id="btn">Check price</button>
    <pre id="result"></pre>
  </div>
<script>
const $ = id => document.getElementById(id);
$('#btn').addEventListener('click', async () => {
  const item = $('#item').value.trim();
  if (!item) { alert('Enter an item name'); return; }
  const float = $('#float').value.trim();
  const paintSeed = $('#seed').value.trim();
  $('#btn').disabled = true; $('#btn').textContent = 'Checking…';
  $('#result').textContent = '';
  try {
    const r = await fetch('/api/price', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ item, float, paintSeed })
    });
    const data = await r.json();
    $('#result').textContent = data.expectedPrice ? `≈ $${data.expectedPrice.toFixed(2)}` : `Error: ${data.error}`;
  } catch (e) {
    $('#result').textContent = 'Network error';
  } finally {
    $('#btn').disabled = false; $('#btn').textContent = 'Check price';
  }
});
</script>
</body>
</html>
